v {xschem version=3.4.7RC file_version=1.2}
G {}
K {}
V {}
S {}
E {}
N 260 -580 260 -540 {lab=VDD}
N 260 -580 440 -580 {lab=VDD}
N 440 -600 440 -580 {lab=VDD}
N 440 -580 620 -580 {lab=VDD}
N 620 -580 620 -540 {lab=VDD}
N 520 -580 520 -540 {lab=VDD}
N 360 -580 360 -540 {lab=VDD}
N 260 -510 360 -510 {lab=VDD}
N 310 -580 310 -510 {lab=VDD}
N 520 -510 620 -510 {lab=VDD}
N 570 -580 570 -510 {lab=VDD}
N 520 -480 520 -460 {lab=D1}
N 620 -480 620 -460 {lab=D1}
N 400 -510 410 -510 {lab=D1}
N 400 -460 460 -510 {lab=D2}
N 460 -510 480 -510 {lab=D2}
N 260 -480 260 -460 {lab=D2}
N 360 -480 360 -460 {lab=D2}
N 260 -460 400 -460 {lab=D2}
N 360 -460 360 -380 {lab=D2}
N 520 -460 520 -340 {lab=D1}
N 360 -380 360 -340 {lab=D2}
N 360 -280 360 -240 {lab=NR1}
N 520 -280 520 -240 {lab=NR2}
N 520 -80 520 -40 {lab=GND}
N 360 -80 360 -40 {lab=GND}
N 360 -160 360 -140 {lab=NR1}
N 520 -160 520 -140 {lab=NR2}
N 410 -510 420 -510 {lab=D1}
N 420 -510 480 -460 {lab=D1}
N 580 -360 580 -310 {lab=CLK}
N 560 -310 580 -310 {lab=CLK}
N 300 -360 300 -310 {lab=CLK}
N 300 -310 320 -310 {lab=CLK}
N 450 -40 450 0 {lab=GND}
N 360 -310 520 -310 {lab=#net1}
N 480 -460 620 -460 {lab=D1}
N 360 -40 520 -40 {lab=GND}
N 460 -110 480 -110 {lab=D2}
N 400 -110 420 -110 {lab=D1}
N 340 -110 340 -40 {lab=GND}
N 340 -40 360 -40 {lab=GND}
N 340 -110 360 -110 {lab=GND}
N 520 -110 540 -110 {lab=GND}
N 540 -110 540 -40 {lab=GND}
N 520 -40 540 -40 {lab=GND}
N -240 -420 520 -420 {lab=D1}
N -240 -420 -240 -360 {lab=D1}
N -120 -380 -120 -370 {lab=D2}
N -120 -380 360 -380 {lab=D2}
N -360 -400 -360 -360 {lab=#net2}
N -350 -400 0 -400 {lab=#net2}
N 0 -400 0 -360 {lab=#net2}
N -360 -400 -350 -400 {lab=#net2}
N -240 -330 -120 -330 {lab=GND}
N -180 -480 -180 -400 {lab=#net2}
N -120 -370 -120 -360 {lab=D2}
N -180 -580 -180 -540 {lab=VDD}
N -240 -300 -240 -280 {lab=diff_nch_s}
N -240 -280 -120 -280 {lab=diff_nch_s}
N -120 -300 -120 -280 {lab=diff_nch_s}
N -180 -280 -180 -120 {lab=diff_nch_s}
N 360 -240 360 -160 {lab=NR1}
N 520 -240 520 -160 {lab=NR2}
N 360 -360 400 -360 {lab=D2}
N 400 -360 460 -110 {lab=D2}
N 480 -360 520 -360 {lab=D1}
N 420 -110 480 -360 {lab=D1}
N 0 -300 0 -240 {lab=NR1}
N -360 -300 -360 -180 {lab=NR2}
N 0 -240 360 -240 {lab=NR1}
N -360 -180 520 -180 {lab=NR2}
N -160 -330 -160 -40 {lab=GND}
N -180 -60 -180 -20 {lab=GND}
N -180 -20 -180 0 {lab=GND}
N -160 -40 -160 -20 {lab=GND}
N -180 -20 -160 -20 {lab=GND}
N -180 -600 -180 -580 {lab=VDD}
N -40 -330 0 -330 {lab=VDD}
N -40 -560 -40 -330 {lab=VDD}
N -180 -560 -40 -560 {lab=VDD}
N -320 -560 -180 -560 {lab=VDD}
N -320 -560 -320 -330 {lab=VDD}
N -360 -330 -320 -330 {lab=VDD}
N -300 -330 -300 -280 {lab=INP}
N -420 -330 -400 -330 {lab=INP}
N -420 -330 -420 -280 {lab=INP}
N 40 -330 60 -330 {lab=REF}
N 60 -330 60 -260 {lab=REF}
N -480 -260 60 -260 {lab=REF}
N -80 -330 -60 -330 {lab=REF}
N -60 -330 -60 -260 {lab=REF}
N 130 -440 140 -440 {lab=CLK}
N 140 -440 680 -440 {lab=CLK}
N 680 -510 680 -440 {lab=CLK}
N 660 -510 680 -510 {lab=CLK}
N 200 -510 220 -510 {lab=CLK}
N 200 -510 200 -440 {lab=CLK}
N 300 -440 300 -360 {lab=CLK}
N 580 -440 580 -360 {lab=CLK}
N 910 -410 980 -410 {lab=OUT1}
N 910 -290 980 -290 {lab=OUT2}
N 940 -410 940 -380 {lab=OUT1}
N 800 -320 940 -380 {lab=OUT1}
N 800 -320 800 -300 {lab=OUT1}
N 800 -300 820 -300 {lab=OUT1}
N 940 -320 940 -290 {lab=OUT2}
N 800 -380 940 -320 {lab=OUT2}
N 800 -400 800 -380 {lab=OUT2}
N 800 -400 820 -400 {lab=OUT2}
N 520 -420 820 -420 {lab=D1}
N 360 -380 740 -380 {lab=D2}
N 740 -380 740 -280 {lab=D2}
N 740 -280 820 -280 {lab=D2}
N -500 -280 -480 -280 {lab=INP}
N -500 -260 -480 -260 {lab=REF}
N -480 -280 -300 -280 {lab=INP}
N -300 -330 -280 -330 {lab=INP}
N -180 -90 -160 -90 {lab=GND}
N -240 -90 -230 -90 {lab=VDD}
N -230 -90 -220 -90 {lab=VDD}
N -240 -120 -240 -90 {lab=VDD}
N -180 -510 -160 -510 {lab=VDD}
N -160 -560 -160 -510 {lab=VDD}
N -260 -510 -220 -510 {lab=GND}
N -260 -510 -260 -470 {lab=GND}
C {NMOS_MIN.sym} 320 -310 0 0 {name=M2 model=nch w=6.5u l=0.65u as=0 ps=0 ad=0 pd=0 m=1}
C {NMOS_MIN.sym} 560 -310 0 1 {name=M4 model=nch w=6.5u l=0.65u as=0 ps=0 ad=0 pd=0 m=1}
C {vdd.sym} 440 -600 0 0 {name=l1 lab=VDD}
C {gnd.sym} 450 0 0 0 {name=l2 lab=GND}
C {PMOS_MIN.sym} 660 -510 2 0 {name=M5 model=pch w=19.5u l=0.65u as=0 ps=0 ad=0 pd=0 m=1}
C {PMOS_MIN.sym} 480 -510 2 1 {name=M6 model=pch w=19.5u l=0.65u as=0 ps=0 ad=0 pd=0 m=1}
C {NMOS_MIN.sym} 400 -110 0 1 {name=M7 model=nch w=6.5u l=0.65u as=0 ps=0 ad=0 pd=0 m=1}
C {NMOS_MIN.sym} 480 -110 0 0 {name=M8 model=nch w=6.5u l=0.65u as=0 ps=0 ad=0 pd=0 m=1}
C {gnd.sym} -180 0 0 0 {name=l3 lab=GND}
C {vdd.sym} -180 -600 0 0 {name=l5 lab=VDD}
C {ipin.sym} -500 -280 0 0 {name=p4 lab=INP}
C {ipin.sym} -500 -260 0 0 {name=p5 lab=REF}
C {ipin.sym} 130 -440 0 0 {name=p2 lab=CLK}
C {LR_Work2/symbol/2NANDLR.sym} 970 -410 0 0 {name=x1}
C {LR_Work2/symbol/2NANDLR.sym} 970 -290 0 0 {name=x2}
C {opin.sym} 980 -410 0 0 {name=p1 lab=OUT1}
C {opin.sym} 980 -290 0 0 {name=p3 lab=OUT2}
C {code_shown.sym} -150 50 0 0 {name=spice only_toplevel=false value="

.inc /home/tororo/LR/T_mos_model.sp

VVDD VDD 0 DC 3.3

VINP INP 0 pwl (0 0 25n 0 26n 3.3 75n 3.3 76n 0.2 125n 0.2 126n 3.1 175n 3.1 176n 0.4 225n 0.4 226n 2.9 275n 2.9 276n 0.6 325n 0.6 326n 2.7 375n 2.7 376n 0.8 425n 0.8 426n 2.5 475n 2.5 476n 1.0 525n 1.0 526n 2.3 575n 2.3 576n 1.2 625n 1.2 
+ 626n 2.1 675n 2.1 +676n 1.4 725n 1.4 726n 1.9 775n 1.9 776n 1.6 825n 1.6 826n 1.7 875n 1.7 ) 
*VINP INP 0 pwl (0 0 25n 0 26n 1.7 75n 1.7 76n 1.6 125n 1.6 126n 1.68 175n 1.68 176n 1.62 225n 1.62 226n 1.66 275n 1.66 276n 1.64 325n 1.64 326n 1.655 375n 1.655 376n 1.645 425n 1.645 426n 1.651 475n 1.651 476n 1.649 525n 1.649 526n 1.6501 575n 1.6501 576n 1.6499 625n 1.6499 626n 1.65001 675n 1.65001 676n 1.64999 725n 1.6499 726n 1.9 775n 1.9 776n 1.6 825n 1.6 826n 1.7 875n 1.7)
*VINP INP 0 pwl (0 2.15 25n 2.15 26n 1.15 75n 1.15 76n 1.95 125n 1.95 126n 1.35 175n 1.35)
*VINP INP 0 pwl (0 1.85 25n 1.85 26n 1.45 75n 1.45 76n 1.83 125n 1.83 126n 1.47 175n 1.47)

VREF REF 0 DC 1.65

VCLK CLK 0 pulse(0 3.3 0n 1n 1n 25n 50n)
*VCLK CLK 0 pulse(0 3.3 0n 1n 1n 50n 100n)

.control
tran 1n 875n

*meas tran delayIN1 find time WHEN v(CLK)=0.9 RISE=3 
*meas tran delayOUT find time WHEN v(OUT1)=0.9 FALL=2
*let delay1 = delayOUT - delayIN1
*echo tpHL = $&delay1

*meas tran delayIN1 find time WHEN v(CLK)=0.9 RISE=4 
*meas tran delayOUT find time WHEN v(OUT1)=0.9 RISE=2
*let delay2 = delayOUT - delayIN1
*echo tpLH = $&delay2


write "Wide-swing_clocked_comparator.raw"

.endc"}
C {PMOS_MIN.sym} 400 -510 2 0 {name=M1 model=pch w=19.5u l=0.65u as=0 ps=0 ad=0 pd=0 m=1}
C {PMOS_MIN.sym} 220 -510 2 1 {name=M3 model=pch w=19.5u l=0.65u as=0 ps=0 ad=0 pd=0 m=1}
C {PMOS_MIN.sym} 40 -330 2 0 {name=M12 model=pch w=19.5u l=0.65u as=0 ps=0 ad=0 pd=0 m=1}
C {PMOS_MIN.sym} -400 -330 2 1 {name=M11 model=pch w=19.5u l=0.65u as=0 ps=0 ad=0 pd=0 m=1}
C {NMOS_MIN.sym} -280 -330 0 0 {name=M9 model=nch w=6.5u l=0.65u as=0 ps=0 ad=0 pd=0 m=1}
C {NMOS_MIN.sym} -80 -330 0 1 {name=M10 model=nch w=6.5u l=0.65u as=0 ps=0 ad=0 pd=0 m=1}
C {lab_wire.sym} -180 -240 0 0 {name=p6 sig_type=std_logic lab=diff_nch_s}
C {NMOS_MIN.sym} -220 -90 0 0 {name=M13 model=nch w=6.5u l=1.3u as=0 ps=0 ad=0 pd=0 m=1}
C {vdd.sym} -240 -120 0 0 {name=l4 lab=VDD}
C {PMOS_MIN.sym} -220 -510 2 1 {name=M14 model=pch w=19.5u l=1.3u as=0 ps=0 ad=0 pd=0 m=1}
C {gnd.sym} -260 -470 0 0 {name=l6 lab=GND}
C {lab_wire.sym} 150 -240 0 0 {name=p7 sig_type=std_logic lab=NR1}
C {lab_wire.sym} 150 -180 0 0 {name=p8 sig_type=std_logic lab=NR2}
C {lab_pin.sym} 720 -420 0 0 {name=p9 sig_type=std_logic lab=D1}
C {lab_pin.sym} 720 -380 0 0 {name=p10 sig_type=std_logic lab=D2}
